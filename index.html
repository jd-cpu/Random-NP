<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>랜덤 Post-test 퀴즈</title>

  <!-- 캐시 방지 (HTML 자체는 매번 새로 요청하도록 유도) -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- (선택) manifest에 버전 붙여서 PWA 캐시 최소화 -->
  <link rel="manifest" href="manifest.json?v=20250810">

  <style>
    body { font-family: Arial, sans-serif; text-align:center; padding:20px; max-width:700px; margin:auto; }
    #question, #answer { white-space: pre-line; margin: 18px 0; font-size:1.15rem; }
    button { padding:10px 18px; margin:6px; font-size:1rem; cursor:pointer; }
    #answer { color: #0a6; font-weight:600; display:none; }
  </style>
</head>
<body>
  <h1>랜덤 Post-test 퀴즈</h1>

  <div id="question">문제를 불러오는 중...</div>
  <div id="answer"></div>

  <div>
    <button id="btnShow">정답 보기</button>
    <button id="btnNext">다음 문제</button>
  </div>

  <script>
    // ===== 문제 목록 (여기에 문제/정답 추가) =====
    // 줄바꿈은 문자열 안에서 \n 또는 백틱(``) 사용 가능
    const questions = [
      { q: "심폐소생술의 가슴 압박 깊이는 몇 cm인가요?\n(어른 기준)", a: "약 5cm" },
      { q: "사과는 영어로 무엇인가요?", a: "Apple" },
      { q: "파이(π)를 소수점 둘째 자리까지 쓰시오.", a: "3.14" },
      // ... 더 추가
    ];
    // ============================================

    // 현재 인덱스 (초기값 -1 : 아직 선택된 문제 없음)
    let currentIndex = -1;

    // 새 랜덤 인덱스 반환 (직전 인덱스와 중복 방지)
    function pickRandomIndex() {
      if (questions.length === 0) return -1;
      if (questions.length === 1) return 0;
      let idx;
      do {
        idx = Math.floor(Math.random() * questions.length);
      } while (idx === currentIndex);
      return idx;
    }

    function showQuestionByIndex(i) {
      if (i < 0 || i >= questions.length) {
        document.getElementById('question').innerText = "문제가 없습니다.";
        document.getElementById('answer').style.display = 'none';
        document.getElementById('answer').innerText = "";
        return;
      }
      document.getElementById('question').innerText = questions[i].q;
      document.getElementById('answer').innerText = questions[i].a;
      document.getElementById('answer').style.display = 'none';
    }

    function nextQuestion() {
      const newIndex = pickRandomIndex();
      currentIndex = newIndex;
      showQuestionByIndex(currentIndex);
    }

    function showAnswer() {
      if (currentIndex === -1) return;
      document.getElementById('answer').style.display = 'block';
    }

    // 버튼 이벤트 연결
    document.getElementById('btnShow').addEventListener('click', showAnswer);
    document.getElementById('btnNext').addEventListener('click', nextQuestion);

    // 페이지 로드 시 첫 문제 즉시 랜덤 선택
    nextQuestion();

    // 디버깅용: 콘솔에 현재 배열·인덱스 확인 가능
    // console.log('questions:', questions);
  </script>
</body>
</html>
